generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider          = "sqlserver"
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
}

model Users {
  id        Int       @id @default(autoincrement())
  email     String    @unique
  username  String    @unique
  password  String
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  profile   Profiles?
}

model Profiles {
  id            Int    @id @default(autoincrement())
  userId        Int    @unique
  name          String @default("")
  firstSurname  String @default("")
  secondSurname String @default("")
  bio           String @default("")
  location      String @default("")
  pronoun       String @default("")
  profileImage  String @default("")

  user          Users  @relation(fields: [userId], references: [id])
  games         ProfileGame[]
}

model Games {
  id           Int             @id @default(autoincrement())
  title        String
  description  String?
  platform     String?
  releaseDate  DateTime?
  imageUrl     String?

  profiles     ProfileGame[]
}

model ProfileGame {
  id         Int           @id @default(autoincrement())
  profileId  Int
  gameId     Int

  rating     Float?  
  liked      Boolean?
  status     String?

  profile    Profiles      @relation(fields: [profileId], references: [id], onDelete: Cascade)
  game       Games         @relation(fields: [gameId], references: [id], onDelete: Cascade)

  @@unique([profileId, gameId])
}



